## 1. 개요

**목표**: iOS 애플 메모장과 유사한 스타일·서식 편집 기능을 가진 모바일 웹앱 ‘B Note’에 Clerk.ai 기반 인증을 도입하여, 사용자별 노트를 안전하게 분리·관리한다.

**플랫폼**: 모바일 웹 (Responsive), PWA 확장 가능

---

## 2. 사용자 스토리

1. **새 사용자**로서, 이메일·소셜 계정(Google, GitHub 등)으로 빠르게 가입·로그인하고 싶다.
2. **기존 사용자**로서, 로그인 후에 본인이 작성한 노트만 보고 관리하고 싶다.
3. **노트 작성자**로서, 다양한 서식(볼드·이탤릭·링크 등)을 적용해 자유롭게 글을 작성하고 싶다.
4. **모바일 사용자**로서, 오프라인에서도 노트를 조회·작성·수정할 수 있으면 좋겠다.

---

## 3. 주요 기능

### 3.1 인증 및 사용자 관리 (Clerk.ai)

* **Clerk.ai 통합**: Clerk React/Next.js SDK 사용
* **회원가입(Sign Up)**: 이메일·비밀번호, 소셜 로그인(Google, GitHub)
* **로그인(Sign In)**: 이메일 기반 또는 소셜 로그인 화면 제공
* **세션 관리**: JWT 토큰 자동 갱신(Refresh) 및 만료 처리
* **사용자 속성**: 프로필 사진, 사용자명, UID 저장

### 3.2 노트 CRUD 및 사용자 분리

* **노트 생성**: 로그인한 사용자 UID와 연동된 새 노트 생성
* **노트 조회**: `GET /api/notes?userId=<uid>` → 본인 소유 노트만
* **노트 수정**: `PATCH /api/notes/{noteId}` (owner 검사)
* **노트 삭제**: `DELETE /api/notes/{noteId}` (owner 검사)
* **데이터 모델**: `Note { id, userId, title, content, weather, createdAt, updatedAt }`

### 3.3 편집 툴바

* **텍스트 서식**: 볼드, 이탤릭, 밑줄, 취소선, 링크, 인용구, 구분선
* **목록**: 불릿, 번호 목록
* **스타일**: 글자 크기, 글자 색상, 배경색
* **UI**: 고정된 툴바, 직관적 아이콘, 터치 영역 44×44px 이상

### 3.4 레이아웃 및 네비게이션

* **상단 고정**: 햄버거 메뉴(노트 목록 토글), 앱 로고, 날씨 버튼
* **편집 기능 바**: 상단 아래 고정
* **편집 영역**: 툴바 하단 전체 화면
* **좌측 노트 목록**: 슬라이드 아웃, 제목·수정일 표시·삭제 버튼
* **자동 저장**: 편집 멈춤 2초 후 서버 동기화

### 3.5 날씨 모션

* 버튼 클릭 순환: 비, 눈, 맑음, 구름, 달밤
* `달밤` 선택 시 다크 모드 전환
* CSS 애니메이션 or Canvas 기반

---

## 4. 오프라인 지원 & 동기화

* **IndexedDB**: 로컬에 노트 임시 저장
* **Background Sync API**: 네트워크 복구 시 서버 동기화
* **충돌 처리**: 타임스탬프 비교 후 머지 또는 사용자 선택

---

## 5. 비기능 요구사항

* **반응형 디자인**: 모바일·태블릿 호환
* **접근성(Accessibility)**: WCAG AA 준수
* **보안**: TLS, CSRF·XSS 방어
* **성능**: 첫 페인트 1초 이내, 편집 지연 ≤100ms
* **PWA**: 서비스 워커로 정적 자원 및 API 캐시

---

## 6. 기술 스택

* 프레임워크: Next.js + React
* 인증: Clerk.ai React SDK
* 편집기: Slate.js
* 스타일: Tailwind CSS
* 백엔드: Node.js (Express) + MongoDB / PostgreSQL
* PWA: Workbox

---

## 7. 향후 확장

* 태그·폴더 분류
* Markdown/HTML/PDF 내보내기
* 외부 서비스(Drive, Notion) 연동
* 실시간 협업(공유 권한 관리)
* Analytics: 사용자 행동, 사용량 모니터링
