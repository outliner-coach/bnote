(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[151],{9646:function(e,t,n){Promise.resolve().then(n.bind(n,6853))},8792:function(e,t,n){"use strict";n.d(t,{default:function(){return r.a}});var o=n(5250),r=n.n(o)},6853:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return c}});var o=n(7437),r=n(2265),s=n(7907),a=n(8792),l=n(5829),i=n(8222);function c(){let{isLoaded:e,isSignedIn:t,user:n}=(0,l.aF)(),c=(0,s.useRouter)(),[d,u]=(0,r.useState)([]),[h,f]=(0,r.useState)(!0),[g,b]=(0,r.useState)(null);return((0,r.useEffect)(()=>{if(e&&!t){c.push("/sign-in");return}let n=async()=>{try{console.log("Loading notes...");let e=await (0,i.jO)();console.log("Notes loaded:",e),u(e)}catch(e){console.error("Failed to load notes:",e),b("Failed to load notes. Please try again later.")}finally{f(!1)}};t&&n()},[e,t,c]),!e||h)?(0,o.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,o.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-blue-500"})}):(0,o.jsx)("div",{className:"min-h-screen bg-transparent",children:(0,o.jsxs)("div",{className:"bnote-container py-8",children:[(0,o.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[(0,o.jsx)("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"내 노트"}),(0,o.jsx)(a.default,{href:"/notes/new",className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"새 노트 작성"})]}),g&&(0,o.jsx)("div",{className:"mb-6 p-4 bg-red-50 dark:bg-red-900/50 border border-red-200 dark:border-red-700 rounded-lg",children:(0,o.jsx)("p",{className:"text-red-600 dark:text-red-300",children:g})}),(0,o.jsx)("div",{className:"bg-white/90 dark:bg-gray-800/90 backdrop-blur-sm rounded-lg shadow-sm border border-gray-200 dark:border-gray-600 overflow-hidden",children:0===d.length?(0,o.jsxs)("div",{className:"text-center py-12",children:[(0,o.jsx)("p",{className:"text-gray-600 mb-4",children:"아직 노트가 없습니다."}),(0,o.jsx)("button",{onClick:()=>{c.push("/notes/new")},className:"px-6 py-3 bg-blue-500 text-white rounded-lg hover:bg-blue-600",children:"첫 노트 작성하기"})]}):(0,o.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:d.map(e=>(console.log("Rendering note:",{id:e.id,title:e.title}),(0,o.jsxs)(a.default,{href:"/notes/".concat(e.id),className:"block p-6 bg-white rounded-lg shadow hover:shadow-md transition-shadow",onClick:()=>console.log("Clicked note with ID:",e.id),children:[(0,o.jsx)("h2",{className:"text-xl font-semibold mb-2 truncate",children:e.title}),(0,o.jsxs)("div",{className:"flex items-center justify-between text-gray-600 text-sm",children:[(0,o.jsx)("span",{children:new Date(e.updatedAt).toLocaleDateString("ko-KR",{year:"numeric",month:"long",day:"numeric"})}),e.weather&&(0,o.jsxs)("span",{className:"text-lg",children:["sunny"===e.weather&&"☀️","cloudy"===e.weather&&"☁️","rain"===e.weather&&"\uD83C\uDF27️","snow"===e.weather&&"❄️","night"===e.weather&&"\uD83C\uDF19"]})]})]},e.id)))})})]})})}},8222:function(e,t,n){"use strict";async function o(){let e=await fetch("/api/notes");if(!e.ok)throw Error("Failed to fetch notes");return e.json()}async function r(e){console.log("fetchNote called with id:",e);let t=await fetch("/api/notes/".concat(e));if(console.log("fetchNote response status:",t.status),!t.ok)throw console.error("fetchNote error response:",await t.text()),Error("Failed to fetch note");let n=await t.json();return console.log("fetchNote result:",n),n}async function s(e){let t=await fetch("/api/notes",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw Error("Failed to create note");return t.json()}async function a(e,t){let n=await fetch("/api/notes/".concat(e),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!n.ok)throw Error("Failed to update note");return n.json()}async function l(e){console.log("deleteNote called with id:",e);let t=await fetch("/api/notes/".concat(e),{method:"DELETE"});if(console.log("deleteNote response status:",t.status),!t.ok)throw console.error("deleteNote error response:",await t.text()),Error("Failed to delete note");console.log("Note deleted successfully")}n.d(t,{FX:function(){return r},Qk:function(){return a},f_:function(){return l},jO:function(){return o},kT:function(){return s}})}},function(e){e.O(0,[969,250,971,69,744],function(){return e(e.s=9646)}),_N_E=e.O()}]);