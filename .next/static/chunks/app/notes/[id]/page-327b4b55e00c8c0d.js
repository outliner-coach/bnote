(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[384],{4423:function(e,t,r){Promise.resolve().then(r.bind(r,660))},660:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return x}});var s=r(7437),n=r(2265),a=r(7907),l=r(8792),o=r(5829),i=r(384);let c=n.forwardRef(function({title:e,titleId:t,...r},s){return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},r),e?n.createElement("title",{id:t},e):null,n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L6.832 19.82a4.5 4.5 0 0 1-1.897 1.13l-2.685.8.8-2.685a4.5 4.5 0 0 1 1.13-1.897L16.863 4.487Zm0 0L19.5 7.125"}))}),d=n.forwardRef(function({title:e,titleId:t,...r},s){return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},r),e?n.createElement("title",{id:t},e):null,n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"}))});var u=r(2846),m=r(2529),h=r(8222);function x(e){let{params:t}=e,{id:r}=t,{isLoaded:x,isSignedIn:g,user:f}=(0,o.aF)(),b=(0,a.useRouter)(),[w,y]=(0,n.useState)(null),[j,v]=(0,n.useState)(!1),[p,N]=(0,n.useState)(!1),[k,L]=(0,n.useState)(!1);(0,n.useEffect)(()=>{if(console.log("NotePage useEffect - id:",r,"isLoaded:",x,"isSignedIn:",g),x&&!g){console.log("User not signed in, redirecting to sign-in"),b.push("/sign-in");return}let e=async()=>{try{console.log("Loading note with id:",r);let e=await (0,h.FX)(r);console.log("Note loaded successfully:",e),y(e)}catch(e){console.error("노트를 불러오는데 실패했습니다:",e),b.push("/notes")}};g&&(console.log("User signed in, loading note"),e())},[r,x,g,b]);let C=()=>{v(!1)},E=async e=>{if(w)try{L(!0);let t=await (0,h.Qk)(w.id,{title:e.title,content:e.content,weather:e.weather});y(t),v(!1)}catch(e){console.error("노트 업데이트에 실패했습니다:",e),alert("노트 업데이트에 실패했습니다. 다시 시도해주세요.")}finally{L(!1)}},S=async()=>{if(w&&!p&&confirm("정말로 이 노트를 삭제하시겠습니까?")){console.log("Starting delete process for note:",w.id),N(!0);try{await (0,h.f_)(w.id),console.log("Delete successful, redirecting to notes list"),b.push("/notes")}catch(e){console.error("노트 삭제에 실패했습니다:",e),alert("노트 삭제에 실패했습니다. 다시 시도해주세요."),N(!1)}}};return x&&w?j?(0,s.jsx)("div",{className:"min-h-screen bg-transparent",children:(0,s.jsxs)("div",{className:"max-w-4xl mx-auto px-4 py-6",children:[(0,s.jsx)("div",{className:"flex items-center justify-between mb-6",children:(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("button",{onClick:C,className:"mr-4 p-2 text-gray-600 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",children:(0,s.jsx)(i.Z,{className:"w-5 h-5"})}),(0,s.jsx)("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"노트 수정"})]})}),(0,s.jsx)("div",{className:"bg-white/90 dark:bg-gray-800/90 backdrop-blur-sm rounded-lg shadow-sm border border-gray-200 dark:border-gray-600 overflow-hidden p-6",children:(0,s.jsx)(m.L,{note:w,onSubmit:E,onCancel:C,isSubmitting:k,submitButtonText:"수정 완료",showCancelButton:!0})})]})}):(0,s.jsxs)("div",{className:"max-w-4xl mx-auto px-4 py-8",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-8",children:[(0,s.jsxs)(l.default,{href:"/notes",className:"flex items-center text-gray-600 hover:text-gray-900",children:[(0,s.jsx)(i.Z,{className:"h-5 w-5 mr-2"}),"뒤로 가기"]}),(0,s.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,s.jsxs)("button",{onClick:()=>{v(!0)},className:"flex items-center px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200",children:[(0,s.jsx)(c,{className:"h-5 w-5 mr-2"}),"수정"]}),(0,s.jsxs)("button",{onClick:S,disabled:p,className:"flex items-center px-4 py-2 bg-red-100 text-red-700 rounded-lg hover:bg-red-200 disabled:opacity-50",children:[(0,s.jsx)(d,{className:"h-5 w-5 mr-2"}),p?"삭제 중...":"삭제"]})]})]}),(0,s.jsx)("h1",{className:"text-3xl font-bold mb-8",children:w.title}),w.weather&&(0,s.jsx)("div",{className:"mb-8",children:(0,s.jsxs)("span",{className:"text-2xl",children:["sunny"===w.weather&&"☀️","cloudy"===w.weather&&"☁️","rain"===w.weather&&"\uD83C\uDF27️","snow"===w.weather&&"❄️","night"===w.weather&&"\uD83C\uDF19"]})}),(0,s.jsx)(u.Z,{value:w.content,onChange:()=>{},readOnly:!0})]}):(0,s.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,s.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-blue-500"})})}}},function(e){e.O(0,[815,583,969,250,128,594,971,69,744],function(){return e(e.s=4423)}),_N_E=e.O()}]);