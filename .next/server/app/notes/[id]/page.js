(()=>{var e={};e.id=384,e.ids=[384],e.modules={7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},4300:e=>{"use strict";e.exports=require("buffer")},6113:e=>{"use strict";e.exports=require("crypto")},2254:e=>{"use strict";e.exports=require("node:buffer")},6005:e=>{"use strict";e.exports=require("node:crypto")},7561:e=>{"use strict";e.exports=require("node:fs")},8849:e=>{"use strict";e.exports=require("node:http")},2286:e=>{"use strict";e.exports=require("node:https")},7503:e=>{"use strict";e.exports=require("node:net")},9411:e=>{"use strict";e.exports=require("node:path")},7742:e=>{"use strict";e.exports=require("node:process")},4492:e=>{"use strict";e.exports=require("node:stream")},2477:e=>{"use strict";e.exports=require("node:stream/web")},1041:e=>{"use strict";e.exports=require("node:url")},7261:e=>{"use strict";e.exports=require("node:util")},5628:e=>{"use strict";e.exports=require("node:zlib")},7282:e=>{"use strict";e.exports=require("process")},1267:e=>{"use strict";e.exports=require("worker_threads")},5264:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>o.a,__next_app__:()=>x,originalPathname:()=>u,pages:()=>c,routeModule:()=>h,tree:()=>d});var s=r(482),n=r(9108),a=r(2563),o=r.n(a),l=r(8300),i={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(i[e]=()=>l[e]);r.d(t,i);let d=["",{children:["notes",{children:["[id]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,7965)),"C:\\ai\\bnote\\src\\app\\notes\\[id]\\page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,6701)),"C:\\ai\\bnote\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,9361,23)),"next/dist/client/components/not-found-error"]}],c=["C:\\ai\\bnote\\src\\app\\notes\\[id]\\page.tsx"],u="/notes/[id]/page",x={require:r,loadChunk:()=>Promise.resolve()},h=new s.AppPageRouteModule({definition:{kind:n.x.APP_PAGE,page:"/notes/[id]/page",pathname:"/notes/[id]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},7798:(e,t,r)=>{Promise.resolve().then(r.bind(r,4741))},4741:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>m});var s=r(5344),n=r(3729),a=r(8428),o=r(6506),l=r(5433),i=r(3925);let d=n.forwardRef(function({title:e,titleId:t,...r},s){return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},r),e?n.createElement("title",{id:t},e):null,n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L6.832 19.82a4.5 4.5 0 0 1-1.897 1.13l-2.685.8.8-2.685a4.5 4.5 0 0 1 1.13-1.897L16.863 4.487Zm0 0L19.5 7.125"}))}),c=n.forwardRef(function({title:e,titleId:t,...r},s){return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},r),e?n.createElement("title",{id:t},e):null,n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"}))});var u=r(7008),x=r(4514),h=r(6548);function m({params:e}){let{id:t}=e,{isLoaded:r,isSignedIn:m,user:p}=(0,l.aF)(),b=(0,a.useRouter)(),[g,y]=(0,n.useState)(null),[f,j]=(0,n.useState)(!1),[w,v]=(0,n.useState)(!1),[N,k]=(0,n.useState)(!1);(0,n.useEffect)(()=>{if(console.log("NotePage useEffect - id:",t,"isLoaded:",r,"isSignedIn:",m),r&&!m){console.log("User not signed in, redirecting to sign-in"),b.push("/sign-in");return}let e=async()=>{try{console.log("Loading note with id:",t);let e=await (0,h.FX)(t);console.log("Note loaded successfully:",e),y(e)}catch(e){console.error("노트를 불러오는데 실패했습니다:",e),b.push("/notes")}};m&&(console.log("User signed in, loading note"),e())},[t,r,m,b]);let L=()=>{j(!1)},q=async e=>{if(g)try{k(!0);let t=await (0,h.Qk)(g.id,{title:e.title,content:e.content,weather:e.weather});y(t),j(!1)}catch(e){console.error("노트 업데이트에 실패했습니다:",e),alert("노트 업데이트에 실패했습니다. 다시 시도해주세요.")}finally{k(!1)}},M=async()=>{if(g&&!w&&confirm("정말로 이 노트를 삭제하시겠습니까?")){console.log("Starting delete process for note:",g.id),v(!0);try{await (0,h.f_)(g.id),console.log("Delete successful, redirecting to notes list"),b.push("/notes")}catch(e){console.error("노트 삭제에 실패했습니다:",e),alert("노트 삭제에 실패했습니다. 다시 시도해주세요."),v(!1)}}};return r&&g?f?s.jsx("div",{className:"min-h-screen bg-transparent",children:(0,s.jsxs)("div",{className:"max-w-4xl mx-auto px-4 py-6",children:[s.jsx("div",{className:"flex items-center justify-between mb-6",children:(0,s.jsxs)("div",{className:"flex items-center",children:[s.jsx("button",{onClick:L,className:"mr-4 p-2 text-gray-600 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",children:s.jsx(i.Z,{className:"w-5 h-5"})}),s.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"노트 수정"})]})}),s.jsx("div",{className:"bg-white/90 dark:bg-gray-800/90 backdrop-blur-sm rounded-lg shadow-sm border border-gray-200 dark:border-gray-600 overflow-hidden p-6",children:s.jsx(x.L,{note:g,onSubmit:q,onCancel:L,isSubmitting:N,submitButtonText:"수정 완료",showCancelButton:!0})})]})}):(0,s.jsxs)("div",{className:"max-w-4xl mx-auto px-4 py-8",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-8",children:[(0,s.jsxs)(o.default,{href:"/notes",className:"flex items-center text-gray-600 hover:text-gray-900",children:[s.jsx(i.Z,{className:"h-5 w-5 mr-2"}),"뒤로 가기"]}),(0,s.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,s.jsxs)("button",{onClick:()=>{j(!0)},className:"flex items-center px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200",children:[s.jsx(d,{className:"h-5 w-5 mr-2"}),"수정"]}),(0,s.jsxs)("button",{onClick:M,disabled:w,className:"flex items-center px-4 py-2 bg-red-100 text-red-700 rounded-lg hover:bg-red-200 disabled:opacity-50",children:[s.jsx(c,{className:"h-5 w-5 mr-2"}),w?"삭제 중...":"삭제"]})]})]}),s.jsx("h1",{className:"text-3xl font-bold mb-8",children:g.title}),g.weather&&s.jsx("div",{className:"mb-8",children:(0,s.jsxs)("span",{className:"text-2xl",children:["sunny"===g.weather&&"☀️","cloudy"===g.weather&&"☁️","rain"===g.weather&&"\uD83C\uDF27️","snow"===g.weather&&"❄️","night"===g.weather&&"\uD83C\uDF19"]})}),s.jsx(u.Z,{value:g.content,onChange:()=>{},readOnly:!0})]}):s.jsx("div",{className:"flex items-center justify-center min-h-screen",children:s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-blue-500"})})}},7008:(e,t,r)=>{"use strict";r.d(t,{Z:()=>c});var s=r(5344),n=r(3729),a=r(3386),o=r(4722),l=r(2542);let i=({attributes:e,children:t,element:r})=>{switch(r.type){case"heading-one":return s.jsx("h1",{...e,className:"text-3xl font-bold mb-4",children:t});case"heading-two":return s.jsx("h2",{...e,className:"text-2xl font-bold mb-3",children:t});case"heading-three":return s.jsx("h3",{...e,className:"text-xl font-bold mb-2",children:t});case"bulleted-list":return s.jsx("ul",{...e,className:"list-disc list-inside mb-4",children:t});case"numbered-list":return s.jsx("ol",{...e,className:"list-decimal list-inside mb-4",children:t});case"list-item":return s.jsx("li",{...e,children:t});default:return s.jsx("p",{...e,className:"mb-3",children:t})}},d=({attributes:e,children:t,leaf:r})=>(r.bold&&(t=s.jsx("strong",{children:t})),r.italic&&(t=s.jsx("em",{children:t})),r.underline&&(t=s.jsx("u",{children:t})),s.jsx("span",{...e,children:t}));function c({placeholder:e="여기에 노트를 작성하세요...",value:t,onChange:r,readOnly:c=!1}){let h=(0,n.useMemo)(()=>(0,l.VC)((0,o.BU)((0,a.Jh)())),[]),m=(0,n.useCallback)(e=>s.jsx(i,{...e}),[]),p=(0,n.useCallback)(e=>s.jsx(d,{...e}),[]),b=()=>{u(h,"bold")?a.ML.removeMark(h,"bold"):a.ML.addMark(h,"bold",!0)},g=()=>{u(h,"italic")?a.ML.removeMark(h,"italic"):a.ML.addMark(h,"italic",!0)},y=()=>{u(h,"underline")?a.ML.removeMark(h,"underline"):a.ML.addMark(h,"underline",!0)},f=e=>{let t=x(h,e),r=["numbered-list","bulleted-list"].includes(e);a.YR.unwrapNodes(h,{match:e=>!a.ML.isEditor(e)&&a.W_.isElement(e)&&["numbered-list","bulleted-list"].includes(e.type),split:!0}),a.YR.setNodes(h,{type:t?"paragraph":r?"list-item":e}),!t&&r&&a.YR.wrapNodes(h,{type:e,children:[]})};return(0,s.jsxs)("div",{className:"w-full mx-auto",children:[!c&&s.jsx("div",{className:"border-b border-gray-200 pb-4 mb-4",children:(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[s.jsx("button",{type:"button",onMouseDown:e=>{e.preventDefault(),b()},className:`px-3 py-1 rounded ${u(h,"bold")?"bg-blue-100 text-blue-700":"hover:bg-gray-100"}`,children:s.jsx("strong",{children:"B"})}),s.jsx("button",{type:"button",onMouseDown:e=>{e.preventDefault(),g()},className:`px-3 py-1 rounded ${u(h,"italic")?"bg-blue-100 text-blue-700":"hover:bg-gray-100"}`,children:s.jsx("em",{children:"I"})}),s.jsx("button",{type:"button",onMouseDown:e=>{e.preventDefault(),y()},className:`px-3 py-1 rounded ${u(h,"underline")?"bg-blue-100 text-blue-700":"hover:bg-gray-100"}`,children:s.jsx("u",{children:"U"})}),s.jsx("div",{className:"h-6 w-px bg-gray-200 mx-2"}),s.jsx("button",{type:"button",onMouseDown:e=>{e.preventDefault(),f("heading-one")},className:`px-3 py-1 rounded ${x(h,"heading-one")?"bg-blue-100 text-blue-700":"hover:bg-gray-100"}`,children:"H1"}),s.jsx("button",{type:"button",onMouseDown:e=>{e.preventDefault(),f("heading-two")},className:`px-3 py-1 rounded ${x(h,"heading-two")?"bg-blue-100 text-blue-700":"hover:bg-gray-100"}`,children:"H2"}),s.jsx("div",{className:"h-6 w-px bg-gray-200 mx-2"}),s.jsx("button",{type:"button",onMouseDown:e=>{e.preventDefault(),f("bulleted-list")},className:`px-3 py-1 rounded ${x(h,"bulleted-list")?"bg-blue-100 text-blue-700":"hover:bg-gray-100"}`,children:"• List"}),s.jsx("button",{type:"button",onMouseDown:e=>{e.preventDefault(),f("numbered-list")},className:`px-3 py-1 rounded ${x(h,"numbered-list")?"bg-blue-100 text-blue-700":"hover:bg-gray-100"}`,children:"1. List"})]})}),s.jsx(o.mH,{editor:h,initialValue:t,onChange:r,children:s.jsx(o.CX,{readOnly:c,placeholder:e,renderElement:m,renderLeaf:p,className:"min-h-[200px] focus:outline-none"})})]})}let u=(e,t)=>{let r=a.ML.marks(e);return!!r&&!0===r[t]},x=(e,t)=>{let{selection:r}=e;if(!r)return!1;let[s]=Array.from(a.ML.nodes(e,{at:a.ML.unhangRange(e,r),match:e=>!a.ML.isEditor(e)&&a.W_.isElement(e)&&e.type===t}));return!!s}},4514:(e,t,r)=>{"use strict";r.d(t,{L:()=>i});var s=r(5344),n=r(3729),a=r(7008),o=r(2274),l=r(301);function i({note:e,onSubmit:t,onCancel:r,isSubmitting:i=!1,submitButtonText:d="저장",showCancelButton:c=!1}){let[u,x]=(0,n.useState)(e?.title||""),[h,m]=(0,n.useState)(e?.content||[{type:"paragraph",children:[{text:""}]}]),{currentWeather:p,setWeather:b}=(0,l.wE)();(0,n.useEffect)(()=>{e?.weather&&b(e.weather)},[e?.weather,b]);let g=async e=>{e.preventDefault(),await t({title:u,content:h,weather:p})};return s.jsx("div",{className:"space-y-6",children:(0,s.jsxs)("form",{onSubmit:g,className:"space-y-6",children:[(0,s.jsxs)("div",{children:[s.jsx("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"제목"}),s.jsx("input",{type:"text",id:"title",value:u,onChange:e=>x(e.target.value),className:"block w-full rounded-md border-gray-300 dark:border-gray-600 shadow-sm focus:border-blue-500 focus:ring-blue-500 dark:bg-gray-700 dark:text-white px-3 py-2 transition-colors duration-300",placeholder:"노트 제목을 입력하세요",required:!0})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"날씨"}),(0,s.jsxs)("div",{className:"flex items-center",children:[s.jsx(o.WeatherButton,{size:"lg",showLabel:!0}),s.jsx("span",{className:"ml-3 text-sm text-gray-500 dark:text-gray-400",children:"클릭하여 날씨를 변경하세요"})]})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"내용"}),s.jsx("div",{className:"border border-gray-300 dark:border-gray-600 rounded-md overflow-hidden bg-white dark:bg-gray-800 transition-colors duration-300",children:s.jsx(a.Z,{value:h,onChange:m,readOnly:!1})})]}),(0,s.jsxs)("div",{className:"flex items-center justify-end space-x-4 pt-4 border-t border-gray-200 dark:border-gray-700",children:[c&&r&&s.jsx("button",{type:"button",onClick:r,className:"px-6 py-2 text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 rounded-md hover:bg-gray-200 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-gray-500 transition-colors duration-300",children:"취소"}),s.jsx("button",{type:"submit",disabled:i,className:"px-6 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-300",children:i?"저장 중...":d})]})]})})}},6548:(e,t,r)=>{"use strict";async function s(){let e=await fetch("/api/notes");if(!e.ok)throw Error("Failed to fetch notes");return e.json()}async function n(e){console.log("fetchNote called with id:",e);let t=await fetch(`/api/notes/${e}`);if(console.log("fetchNote response status:",t.status),!t.ok)throw console.error("fetchNote error response:",await t.text()),Error("Failed to fetch note");let r=await t.json();return console.log("fetchNote result:",r),r}async function a(e){let t=await fetch("/api/notes",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw Error("Failed to create note");return t.json()}async function o(e,t){let r=await fetch(`/api/notes/${e}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!r.ok)throw Error("Failed to update note");return r.json()}async function l(e){console.log("deleteNote called with id:",e);let t=await fetch(`/api/notes/${e}`,{method:"DELETE"});if(console.log("deleteNote response status:",t.status),!t.ok)throw console.error("deleteNote error response:",await t.text()),Error("Failed to delete note");console.log("Note deleted successfully")}r.d(t,{FX:()=>n,Qk:()=>o,f_:()=>l,jO:()=>s,kT:()=>a})},7965:(e,t,r)=>{"use strict";r.r(t),r.d(t,{$$typeof:()=>a,__esModule:()=>n,default:()=>o});let s=(0,r(6843).createProxy)(String.raw`C:\ai\bnote\src\app\notes\[id]\page.tsx`),{__esModule:n,$$typeof:a}=s,o=s.default}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[904,689,476,709,738],()=>r(5264));module.exports=s})();